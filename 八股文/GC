https://www.jianshu.com/p/fe9d206c7d39


漏标的充分必要条件
赋值器插入了一条或多条从黑色对象到白色对象的新引用
赋值器删除了全部从灰色对象到该白色对象的直接或间接引用
如何理解?或者说为什么?


增量更新: 破坏的是第一个条件,当黑色对象插入新的指向白色对象的引用关系时，就将这个新插入的引用记录下来，等并发扫描结束之后，再将这些记录过的引用关系中的黑色对象为根，重新扫描一次。这可以简化理解为：黑色对象一旦新插入了指向白色对象的引用之后，它就变回灰色对象了，CMS使用的是这种解决方案


原始快照(STAB): 破坏的是第二个条件.当灰色对象要删除指向白色对象的引用关系时，就将这个要删除的引用记录下来，在并发扫描结束之后，再将这些记录过的引用关系中的灰色对象为根，重新扫描一次。这也可以简化理解为：无论引用关系删除与否，都会按照刚刚开始扫描那一刻的对象图快照来进行搜索，G1使用的是这种解决方案. 这种方案可能产生浮动垃圾.

